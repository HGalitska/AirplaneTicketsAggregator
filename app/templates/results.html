{% extends "base.html" %}
{% block content %}
    <script>
        function save(flight) {
            console.log("in save")
            $.post('/save', {
                flight_info: flight
            }).done(
                function (response) {
                    console.log(response);
                }
            ).fail(function () {
                console.log("fail");
            });

        }
    </script>

    <p class="heading"> — your results — </p>
    {% for result in results %}
        <div class="row">
            <div class="col-sm-1 col-xs-2 text-center">{{ result.airportA }}</div>
            <div class="col-sm-1 col-xs-2 text-center">
                <img src="/static/img/right-arrow.png">
            </div>
            <div class="col-sm-1 col-xs-2 text-center">{{ result.airportB }}</div>
        </div>
        <div class="row">
            <div class="col-sm-1 text-center">{{ result.timeDeparture }}</div>
            <div class="col-sm-1"></div>
            <div class="col-sm-1 text-center">{{ result.timeArrival }}</div>
        </div>
        <div class="row my-2">
            <div class="col-4">
                <img class="mr-2" src="/static/img/airplane.png">
                {{ result.airline }}
            </div>
        </div>
        <div class="row my-2">
            <div class="col-4">
                <img class="mr-2" src="/static/img/calendar.png">
                {{ result.dateDeparture }}
                {% if not result.dateDeparture ==  result.dateArrival %}
                    <img src="/static/img/right-arrow.png">
                    {{ result.dateArrival }}
                {% endif %}
            </div>
        </div>

        <div class="row">
            <table class="table">
                <tr class="table-primary">
                    {% for type in result.types %}
                        <td>{{ type }}</td>
                    {% endfor %}
                </tr>
                <tr>
                    {% for fare in result.fares %}
                        <td>{{ fare.amount }} {{ fare.currencyCode }}</td>
                    {% endfor %}
                </tr>
            </table>
        </div>
        <a href="{{ result.url }}" target="_blank">Buy a ticket</a>

        <button class="btn btn-outline-dark" onclick='save("{{ result }}")'>Save</button>
        <!--<a href="javascript:save('{{result}}');">Save</a>-->
        <hr>
        </div>
    {% endfor %}

{% endblock %}

